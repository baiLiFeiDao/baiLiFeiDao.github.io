---
title: 若依框架的具体实现
date: 2023-09-25 14:35:48
tags:
- 若依
---

## 登录

### 验证码的流程

后端生成表达式1+4@5

1+4生成图片传到前端，5这个结果传入redis，用作判断验证码是否正确

### 登录的流程

后端：

- 校验验证码
- 校验用户名和密码
- 生成token

使用异步任务管理器，结合线程池，实现了异步的操作日志记录和业务逻辑实现异步解耦合

### 首页加载

前端每个页面跳转都要调用getInfo和getRouters

getInfo：获取角色和权限，存储到Vuex中

getRouters：根据当前用户的权限获取动态路由

## 用户管理

流程：加载vue页面->请求后台数据

用户的list

1.startPage()

PageHelper中的reasonable对参数进行逻辑处理，保证参数的正确性

pageNum=0/-1,pageNum=1

2.userService.select

@DataScope(deptAlias,userAlias)

3.treeselect

(1)查出所有的部门数据

(2)组装成树状结构

recursionFn
